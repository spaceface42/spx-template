/* esm.sh - spx@0.0.5-rc.0 */
var St=Object.defineProperty,br=Object.defineProperties,$r=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable,yt=(e,t,r)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xr=(e,t)=>{for(var r in t||(t={}))wr.call(t,r)&&yt(e,r,t[r]);if(mt)for(var r of mt(t))kr.call(t,r)&&yt(e,r,t[r]);return e},Ar=(e,t)=>br(e,$r(t)),qr=(e,t)=>{for(var r in t)St(e,r,{get:t[r],enumerable:!0})},S=typeof window<"u"?window:{screen:{},navigator:{}},Z=(S.matchMedia||function(){return{matches:!1}}).bind(S),Cr={get passive(){return!0}},Lt=function(){};S.addEventListener&&S.addEventListener("p",Lt,Cr);S.removeEventListener&&S.removeEventListener("p",Lt,!1);var tt="ontouchstart"in S,Er="TouchEvent"in S,Pt=tt||Er&&Z("(any-pointer: coarse)").matches,vt=(S.navigator.maxTouchPoints||0)>0||Pt,jt=S.navigator.userAgent||"",Or=Z("(pointer: coarse)").matches&&/iPad|Macintosh/.test(jt)&&Math.min(S.screen.width||0,S.screen.height||0)>=768,Nr=(Z("(pointer: coarse)").matches||!Z("(pointer: fine)").matches&&tt)&&!/Windows.*Firefox/.test(jt),Tr=Z("(any-pointer: fine)").matches||Z("(any-hover: hover)").matches||Or||!tt,me=vt&&(Tr||!Nr)?"hybrid":vt?"touchOnly":"mouseOnly",Rt=typeof window<"u";"content"in document.createElement("template");document.createRange&&"createContextualFragment"in document.createRange();var E=Pt?"pointer":"mouse",de=window.location.origin,bt=Object.create,k="",Sr=()=>document.documentElement,q=()=>document.body,Mt=()=>document.head,f=e=>e?Object.assign(bt(null),e):bt(null),Y=e=>new Set(e),Lr=e=>new Proxy(f(),e),M=()=>new Map,y=class extends XMLHttpRequest{constructor(){super(...arguments),this.key=null}};y.o=M(),y.c=M(),y.r=f();var v={marks:Y(),store:void 0,snaps:[]},n={index:"",eval:!0,patched:!1,loaded:!1,logLevel:2,qs:f(),fragments:M(),mounted:Y(),registry:M(),instances:M(),maps:Lr({get:(e,t)=>n.instances.get(e[t])}),events:f(),observe:f(),memory:f(),pages:f(),snaps:f(),resources:Y(),config:{fragments:["body"],timeout:3e4,globalThis:!0,schema:"spx-",logLevel:3,cache:!0,components:null,maxCache:100,reverse:!0,preload:null,annotate:!1,eval:{script:null,style:null,link:null,meta:!1},hover:{trigger:"href",threshold:250},intersect:{rootMargin:"0px 0px 0px 0px",threshold:0},proximity:{distance:75,threshold:250,throttle:500},progress:{bgColor:"#111",barHeight:"3px",minimum:.08,easing:"linear",speed:200,threshold:500,trickle:!0,trickleSpeed:200}}},Pr=class extends Error{constructor(e,t){super(e),this.context=t,this.name="SPX Error",t&&(this.context=t)}},ye="SPX ",jr="\x1B[",Rr="\x1B[0m",Mr=(e,t)=>jr+e+t+Rr,w=(e,t="#999")=>{n.logLevel===3&&console.debug("%c"+ye+(Array.isArray(e)?e.join(" "):e),`color: ${t};`)},g=(e,t)=>{n.logLevel>=1&&(t?console.warn(ye+e,t):console.warn(ye+e))},X=(...e)=>{n.logLevel===2&&console.info(ye+Mr("90m",e.join("")))},A=(e,t)=>{throw new Pr(e,t)},Ir=/&(?:amp|lt|gt|quot|#39|#x2F|#x60|#x3D);/g,Wr=/^[A-Z]|[_-]/,Dr=/\b(?:append|prepend)/,Hr=/\s+/g,Xe=/^\b(?:true|false)$/i,It=/^\d*\.?\d+$/,ze=/^(?:[.-]?\d*\.?\d+|NaN)$/,Fr=/\b(?:intersect|hover|proximity)\b/,Xr=/\b(?:SCRIPT|STYLE|LINK)\b/,zr=/\[(['"]?.*['"]?,?)\]/,$t=/[xy]\s*|\d*\.?\d+/gi,ve=Y(),Ur={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"="};function H(e,t){if(arguments.length===1)return i=>H(e,i);let r=t.length;if(r===0)return;let s,o=-1;for(;++o<r&&(s=e(t[o],o,t),s!==!1););return s}var Yr=e=>{let t=e.replace(/\s+,/g,",").replace(/,\s+/g,",").replace(/['"]/g,"");return t.charCodeAt(0)===91&&(/^\[\s*\[/.test(t)||/,/.test(t)&&/\]$/.test(t))&&(t=t.replace(/^\[/,"").replace(/\]$/,"")),t.split(/,|\|/)},K=(e,t)=>{try{let r=(t||e).replace(/\\'|'/g,s=>s[0]==="\\"?s:'"').replace(/"(?:\\.|[^"])*"/g,s=>s.replace(/\n/g,"\\n")).replace(/\[|[^[\]]*|\]/g,s=>/[[\]]/.test(s)?s:s.split(",").map(o=>o.replace(/^(\w+)$/,'"$1"').replace(/^"([\d.]+)"$/g,"$1")).join(",")).replace(/([a-zA-Z0-9_-]+)\s*:/g,'"$1":').replace(/:\s*([$\w-]+)\s*([,\]}])/g,':"$1"$2').replace(/,(\s*[\]}])/g,"$1").replace(/([a-zA-Z_-]+)\s*,/g,'"$1",').replace(/([\]},\s]+)?"(true|false)"([\s,{}\]]+)/g,"$1$2$3");return JSON.parse(r)}catch(r){return A("Invalid JSON in attribute value: "+JSON.stringify(e||t,null,2),r),t}},be=e=>e[e.length-1],Vr=e=>e.replace(/\s+/g," ").trim(),Br=e=>e.replace(/\./g,"\\.").replace(/@/g,"\\@").replace(/:/g,"\\:"),Kr=()=>new Promise(e=>setTimeout(()=>e(),1)),re=(e,t=1,r)=>setTimeout(()=>e(),t),Wt=()=>Promise.resolve(),wt=e=>{switch(e.nodeName){case"SCRIPT":return e.matches(n.qs.g);case"STYLE":return e.matches(n.qs.g);case"META":return e.matches(n.qs.v);case"LINK":return e.matches(n.qs.T);default:return e.getAttribute(n.qs.b)!=="false"}},_r=e=>e.replace(Ir,t=>Ur[t]||t),Dt=()=>new Date().getTime(),Ht=e=>{let t=typeof e=="object";return r=>t&&r?typeof r=="string"?r in e:r.every(s=>s?s in e:!1):!1},I=(e,t)=>typeof e=="object"?t in e:!1,kt=e=>{switch(e){case String:return"";case Boolean:return!1;case Number:return 0;case Object:return{};case Array:return[];default:return e}},ie=(e,t,r,s=null)=>s!==null?t in e?e:Object.defineProperty(e,t,{get:()=>r,configurable:s}):Object.defineProperty(e,t,{get:()=>r}),Ft=e=>"target"in e?e.target.length===1&&e.target[0]==="body"?e.target:e.target.includes("body")?(g(`The body selector passed via ${n.qs.f} will override`),["body"]):e.target.filter((t,r,s)=>t!==""&&t.indexOf(",")===-1?s.indexOf(t)===r:!1):n.config.fragments.length===1&&n.config.fragments[0]==="body"?["body"]:[],Gr=e=>{let t=e.tagName.toLowerCase();if(e.id)return t+"#"+e.id;if(e.hasAttribute("class")){let r=e.className.trim().replace(/\s+/g,".");r&&(t+="."+r)}return`${t}:nth-child(${Array.prototype.indexOf.call(e.parentNode.children,e)+1})`},rt=e=>e.length===1&&e[0]==="body"?"body":e.length===0?null:e.join(","),Ue=e=>{let t=typeof e;if(t==="object"){for(let r in e)return!1;return!0}return t==="string"?e[0]===void 0:Array.isArray(e)?e.length>0:null},Xt=(e=Math.floor(Math.random()*89999+1e4))=>ve.has(e)?Xt():(ve.add(e),e),Q=function e(t=5){let r=Math.random().toString(36).slice(-t);return ve.has(r)?e(t):(ve.add(r),r)},Jr=(e=2)=>(t,r)=>{let s=t.length;return(s<1||t[s-1].length===e?t.push([r]):t[s-1].push(r))&&t},Zr=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB",Qr=e=>e.length===0?"":e[0].toLowerCase()+e.substring(1),zt=e=>e.length===0?"":e[0].toUpperCase()+e.substring(1),es=e=>e.replace(/([a-z0-9])([A-Z])|_+/g,"$1-").toLowerCase(),G=e=>e.replace(/[-_]+(\w)/g,(t,r)=>r.toUpperCase()),ts=e=>Y([].slice.call(e)),V=(e,t)=>{let r=typeof e=="string"?q().querySelectorAll(e):e,s=r.length;if(s===0)return;let o=-1;for(;++o<s&&t(r[o],o)!==!1;);},xt=e=>{for(let t in e)delete e[t]},Te=e=>new DOMParser().parseFromString(e,"text/html"),ae=e=>(e||document).documentElement.outerHTML,Ut=e=>{let t=e.indexOf("<title");if(t===-1||e.slice(0,t).indexOf("<svg")>-1)return k;let r=e.indexOf(">",t)+1,s=e.indexOf("</title",r);return s===-1?k:_r(e.slice(r,s).trim())},rs=(e,t)=>t.querySelector(e),ss=(e,t)=>[].slice.call(t.querySelectorAll(e))||[],Yt=(e=>{let t=s=>new Promise(o=>o(s())),r=async(s=2,o=200)=>{for(;e.length>0;){for(let i of e.splice(0,s))await t(i);await new Promise(i=>setTimeout(i,o))}};return(...s)=>{s.forEach(o=>e.push(o)),re(()=>r(),50)}})([]),ns=()=>{if(n.patched)return;n.patched=!0;let e=Element.prototype.setAttribute,t=document.createElement("i");Element.prototype.setAttribute=function(r,s){if(r.indexOf("@")<0)return e.call(this,r,s);t.innerHTML=`<i ${r}="${s}"></i>`;let o=t.firstElementChild.getAttributeNode(r);t.firstElementChild.removeAttributeNode(o),this.setAttributeNode(o)}},Se=(()=>{let e=[],t=document.createElement("div"),r=null,s,o=null,i=({bgColor:h,barHeight:R,speed:ne,easing:vr})=>{t.style.cssText=`pointer-events:none;background:${h};height:${R};position:fixed;display:block;z-index:2147483647;top:0;left:0;width:100%;will-change:opacity,transform;transition:${ne}ms ${vr};`},a=h=>(-1+h)*100,l=(h,R,ne)=>Math.max(R,Math.min(ne,h)),c=()=>o||(t.style.transform=`translateX(${a(r||0)}%)`,o=q().appendChild(t),t),d=()=>{let h=q();h.contains(o)?o.animate({opacity:["1","0"]},{easing:"ease-out",duration:100}).onfinish=()=>{h.removeChild(o),o=null}:o=null},p=()=>{let h=e.shift();h&&h(p)},m=h=>{e.push(h),e.length===1&&p()},u=h=>{h=l(h,n.config.progress.minimum,1),r=h===1?null:h;let R=c();m(ne=>{R.style.transform=`translateX(${a(h)}%)`,setTimeout(()=>(h===1&&d(),ne()),n.config.progress.speed*(h===1?2:1))})},T=h=>{if(!r)return he();r<1&&(h||(h=r<.2?.1:r<.5?.04:r<.8?.02:.005),u(l(r+h,0,.994)))},ue=()=>setTimeout(()=>r&&(T(),ue()),n.config.progress.trickleSpeed),he=h=>{n.config.progress&&(s=setTimeout(()=>{r||u(0),n.config.progress.trickle&&ue()},h||0))};return{start:he,done:h=>{clearTimeout(s),!(!h&&!r)&&(T(.3+.5*Math.random()),u(1))},style:i}})(),Ye=(e,t)=>{if(e.define.name!=="")return e.define.name;let r=e.name,s=t,o="define"in e&&"name"in e.define;return e.define.name=Qr(t||r),t!==e.define.name&&(t=G(e.define.name)),o&&r!==s&&Wr.test(e.define.name)&&g(`Component name "${e.define.name}" is invalid and converted to: ${t}`),t},B=(e,t=!1)=>{for(let r in e){let s=e[r],o=t?r:Ye(s,r);n.registry.has(o)||(n.registry.set(o,s),w(`Component ${s.name} registered using id: ${o}`))}n.config.components||(n.config.components=!0)};function O(e,...t){let r=e==="cache",s=e==="disconnect"?null:t.length===1?t[0]:t.shift();r&&(t[0]=Te(t[0]));let o=!0;return H(i=>{let a=i.apply(s,t);r?a instanceof Document?o=a.documentElement.outerHTML:typeof o!="string"&&(o=a!==!1):o=a!==!1},n.events[e]||[]),o}var os=(e,t,r)=>(e in n.events||(n.events[e]=[]),n.events[e].push(r?t.bind(r):t)-1),is=(e,t)=>{if(e in n.events){let r=n.events[e];if(r&&typeof t=="number")r.splice(t,1),w(`Removed ${e} event listener (id: ${t})`),r.length===0&&delete n.events[e];else{let s=[];if(r&&t)for(let o=0,i=r.length;o<i;o++)r[o]!==t?s.push(r[o]):e!=="x"&&w(`Removed ${e} event listener (id: ${o})`);s.length?n.events[e]=s:delete n.events[e]}}else g(`Unknown or invalid event listener: ${e}`)},Ve=(e,t)=>{let r=t(e);if(r===!1)return;r===1&&(e=e.nextSibling);let s,o;for(e.firstElementChild&&(o=0,s=e.children[o]);s;)s&&Ve(s,t),s=e.children[++o]},At=(e,t)=>`on${e}`in t?!0:(A(`Invalid event name "${e}" provided`,t),!1),qt=(e,t)=>{let r=e[t.method];return function(s){t.attrs&&(s.attrs=t.attrs),r.call(e,s)}},Be=(e,t)=>{t.attached&&(t.listener.abort(),t.listener=new AbortController,t.options.signal=t.listener.signal,t.attached=!1,w([`Detached ${t.key} ${t.eventName} event from ${t.method}() method in component`,`${e.scope.define.name}: ${e.scope.key}`],"#D1A9FF"))},Vt=(e,t,r)=>{if(t.attached)return;if(!(t.method in e)){g(`Undefined callback method: ${e.scope.define.name}.${t.method}()`);return}let s=r?ie(t,"dom",r).dom:t.dom;vs(s.attributes,t),t.isWindow?At(t.eventName,window)&&addEventListener(t.eventName,qt(e,t)):At(t.eventName,s)&&s.addEventListener(t.eventName,qt(e,t),t.options),t.attached=!0,w([`Attached ${t.key} ${t.eventName} event to ${t.method}() method in component`,`${e.scope.define.name}: ${e.scope.key}`],"#7b97ca")},as=e=>{let{scope:t,view:r}=e;e.state=new Proxy(t.state,{get:Reflect.get,set(o,i,a,l){if(i in t.binds){let c=t.binds[i],d=typeof a=="object"||Array.isArray(a)?JSON.stringify(a):`${a}`;for(let p in c)c[p].live&&(c[p].value=d,V(c[p].selector,m=>{m.innerText=d}))}return Reflect.set(o,i,a,l)}});let s=n.config.schema+t.instanceOf;if(Ue(t.state))for(let o in t.define.state)t.state[o]=kt(t.define.state[o]);else for(let o in t.define.state){let i=t.define.state[o];if(!(o in t.state)){t.state[o]=kt(i);continue}let a=`has${zt(o)}`,l=`${s}:${es(o)}`;r.hasAttribute(l)||(l=`${s}:${o}`);let c=r.getAttribute(l),d=c!==null&&c!=="";if(a in t.state||Reflect.set(t.state,a,d),typeof c=="string"&&c.startsWith("window.")){let p=c.slice(7);p in window?t.state[o]=window[p]:g(`Property "windowProp" does not exist on window: ${n.qs.s}-${l}="${c}"`)}else if(Array.isArray(i))t.state[o]=d?K(c):i;else{let p=typeof i;if(p==="object")t.state[o]=d?K(c):i;else if(p==="number")t.state[o]=d?+c:i;else if(p==="boolean")t.state[o]=d?c==="true":i;else if(p==="string")t.state[o]=d?c:i;else switch(i){case String:t.state[o]=d?c:"";break;case Boolean:t.state[o]=c==="true"||!1;break;case Number:t.state[o]=c?Number(c):0;break;case Object:t.state[o]=d?K(c):{};break;case Array:t.state[o]=d?K(c):[];break}}}};function Le(e){var t;return t=class{get root(){return Sr()}get view(){return this.scope.dom}constructor(r){Reflect.defineProperty(this,"scope",{get(){return Le.scopes.get(r)}}),Reflect.defineProperty(this,"ref",{value:r,configurable:!1,enumerable:!1,writable:!1}),as(this)}},t.define=Object.assign({name:"",merge:!1,state:{},nodes:[]},e),t}Le.scopes=M();var Bt={};qr(Bt,{connect:()=>je,disconnect:()=>ot,hargs:()=>st,hook:()=>ke,mount:()=>nt,teardown:()=>Gt});var ls=()=>re(()=>v.store=void 0),Ke=(e,t)=>{for(let r of t){if(!n.maps[r])continue;let s=n.maps[r],o=r.charCodeAt(0);if(o===99)n.mounted.add(s.scope.key),s.scope.dom=e,s.scope.status=2,w(`Component ${s.scope.define.name} mounted: ${s.scope.key}`,"#6DD093");else if(o===101)Vt(s,s.scope.events[r],e);else if(o===110)for(let i in s.scope.nodes)++s.scope.nodes[i].live;else if(o===98){for(let i in s.scope.binds)if(r in s.scope.binds[i]){e.innerText=s.scope.binds[i][r].value,s.scope.binds[i][r].live=!0;break}}}},$e=(e,t)=>{for(let r of t){if(!n.maps[r])continue;let s=n.maps[r],o=r.charCodeAt(0);if(o===99){s.scope.hooks.unmount===2&&s.unmount(st()),n.mounted.delete(s.scope.key),s.scope.define.merge&&(s.scope.snapshot=e.innerHTML,w(`Component ${s.scope.define.name} snapshot: ${s.scope.key}`));for(let i in s.scope.nodes)s.scope.nodes[i].live=0,s.scope.nodes[i].dom.node=void 0,s.scope.nodes[i].dom.nodes=void 0;for(let i in s.scope.binds)for(let a in s.scope.binds[i])s.scope.binds[i][a].live=!1;for(let i in s.scope.events)Be(s,s.scope.events[i]);s.scope.status=5,w(`Component ${s.scope.define.name} unmounted: ${s.scope.key}`,"#CAAF7C")}else if(o===101)Be(s,s.scope.events[r]);else if(o===110)for(let i in s.scope.nodes)--s.scope.nodes[i].live;else if(o===98){for(let i in s.scope.binds)if(r in s.scope.binds[i]){s.scope.binds[i][r].live=!1;break}}}},we=e=>{if(e.nodeType!==1&&e.nodeType!==11)return;let t=e.getAttribute(n.qs.e);t&&$e(e,t.split(","))},cs=e=>{let t=e.getAttribute(n.qs.e);t?Ke(e,t.split(",")):ee(e.attributes)&&(v.store?v.store.l=e:v.store=Re(e),z(e,v.store))},ds=e=>{v.store?v.store.l=e:v.store=Re(e),z(e,v.store,!1)},ps=(e,t,r,s)=>{r&&(r=r.split(",")),s&&(s=s.split(",")),r&&s?($e(e,r),Ke(e,s)):!r&&s?Ke(e,s):(v.store?v.store.l=e:v.store=Re(t),r&&!s&&$e(e,r),ee(t.attributes)&&z(e,v.store))},Ct=(e,t)=>e.setAttribute(n.qs.e,e.hasAttribute(n.qs.e)?`${e.getAttribute(n.qs.e)},${t.shift()}`:t.shift()),Pe=(e,t)=>{Reflect.set(n.snaps,e,t)?w(`Snapshot ${n.page.key} updated for: ${n.page.snap}`,"#6DD093"):g(`Snapshot ${n.page.key} could not be updated for: ${n.page.snap}`)},_e=e=>(v.snaps.push([e,M()]),e),fs=(e,t)=>v.refs.has(e)?v.refs.get(e).push(t):v.refs.set(e,[t]),Kt=(e,t)=>Yt(()=>{for(;v.snaps.length>0;){let[r,s]=v.snaps.shift();for(let[o,i]of s)r.matches(o)&&Ct(r,i),r.querySelectorAll(o).forEach(a=>Ct(a,i));s.clear()}Pe(t,e.documentElement.outerHTML)}),_t=(e,t)=>re(()=>{let r=pe(e.snap).querySelector(`[${n.qs.e}="${e.ref}"]`);r?(r.innerHTML=e.snapshot,Pe(e.snap,r.ownerDocument.documentElement.outerHTML)):g(`Component snapshot merge failed: ${e.instanceOf} (${t})`)}),us=(e,t)=>{let{page:r,dom:s}=Cs(n.page.key),o=e.charCodeAt(0)===114?"removed":"appended";s.head.contains(t)?(s.head[e](t),Pe(r.snap,s.documentElement.outerHTML),w(`Snapshot record was updated, ${o} ${t.nodeName.toLowerCase()} from <head>`)):g("Node does not exist in the snapshot record, snapshot morph skipped",t)},st=()=>f(f(n.page)),Gt=()=>{for(let e in n.maps)delete n.maps[e];for(let e of n.instances.values())for(let t in e.scope.events)Be(e,e.scope.events[t]);n.instances.clear(),n.mounted.clear(),X("Component instances were disconnected")},nt=e=>{let t=st(),r=[];for(let[s,o,i]of e){let a=n.instances.get(s),l=a.scope.status===4?"unmount":"onmount";a.scope.snap||(a.scope.snap=n.page.snap);let c=async()=>{try{i&&a.scope.status===1?(await a[o](t),await a[i](t)):a.scope.status===4?a.scope.define.merge&&_t(a.scope,s):await a[o](t),a.scope.status=a.scope.status===4?5:3,a.scope.hooks.connect===2&&(a.scope.hooks.connect=3)}catch(d){return g(`Component to failed to ${l}: ${a.scope.instanceOf} (${s})`,d),Promise.reject(s)}};r.push(Wt().then(c))}return Promise.allSettled(r)},ke=()=>{if(n.mounted.size===0&&n.instances.size===0&&n.registry.size>0)return at();let e=[];for(let t of n.mounted){if(!n.instances.has(t))continue;let r=n.instances.get(t);if(r.scope.status!==3&&r.scope.status!==5){let s=r.scope.status===4,o=s?"unmount":"onmount";o in r?o==="onmount"&&"connect"in r&&r.scope.hooks.connect===2?e.push([t,"connect",o]):e.push([t,o]):s&&(r.scope.define.merge&&_t(r.scope,t),r.scope.status=5)}}e.length>0&&nt(e).catch(t=>{let r=n.instances.get(t);r.scope.status=5,n.mounted.delete(t)})},je=()=>{n.registry.size===0||n.observe.components||(n.page.type===0?at():v.store?Ge(v.store).then(ke).then(ls):ke(),n.observe.components=!0)},ot=()=>{n.observe.components&&(ke(),n.observe.components=!1)},hs=(e,t)=>{e.hooks=f(),H(r=>{e.hooks[r]=r in t?2:1},["connect","onmount","unmount","onmedia"])},gs=(e,t,r)=>(s,o)=>{if(t===!1||r&&o.status===2){n.mounted.add(o.key),n.instances.set(o.key,s),w(`Component "${o.instanceOf}" connected: ${o.key}`,"#F48FB1");let i=-1;o.hooks.connect===2&&(i=e.push([o.key,"connect"])-1,o.status=1),o.hooks.onmount===2&&(i=(i>-1?e[i].push("onmount"):e.push([o.key,"onmount"]))-1),i<0&&(o.status=3)}},Et=(e,t,r)=>{for(let s in e.events){let o=e.events[s];s in t.scope.events||(n.maps[s]=t.ref,t.scope.events[s]=o),r!==null&&e.status===3&&(n.maps[s]=e.key,t.scope.events[s]=e.events[s]),Vt(t,e.events[s])}},Ot=(e,t)=>{for(let r in e){let s=e[r],o=`has${zt(r)}`;if(r in t.scope.nodes||(n.maps[r]=t.ref,t.scope.nodes[r]=s),o in t){r in t.scope.nodes&&++t.scope.nodes[r].live;return}Object.defineProperties(t,{[o]:{get:()=>s.live>0},[`${r}Node`]:{get(){let{selector:i,isChild:a,dom:l}=this.scope.nodes[r];return l.node||(l.node=rs(i,a?this.view:q())),l.node}},[`${r}Nodes`]:{get(){let{selector:i,isChild:a,dom:l}=this.scope.nodes[r];return l.nodes||(l.nodes=ss(i,a?this.view:q()),l.nodes&&!l.node&&(l.node=l.nodes[0])),l.nodes}}})}},ms=(e,t,r)=>{let s=r||n.page.type===4,o=gs(e,r,s);return(i,a)=>{if(a)Ot(i.nodes,a),Et(i,a,r);else{let l=n.registry.get(i.instanceOf),c=Object.defineProperty(i,"define",{get:()=>l.define});Le.scopes.set(i.key,c);let d=new l(i.key);hs(i,d),Ot(i.nodes,d),Et(i,d,r),o(d,i)}}},Ge=(e,t)=>{let{t:r,i:s,l:o}=e,i=[],a=Es(),l=ms(i,a,o!==null);for(let c in r){if(!n.registry.has(c)&&!a.has(c)){g(`Component does not exist in registry: ${c}`,r[c]);continue}for(let d of r[c]){if(d.instanceOf==null)if(c in s)d.instanceOf=s[c];else continue;if(a.has(c))for(let p of a.get(c))p.scope.instanceOf===c&&l(d,p);else l(d)}}return re(()=>[a.clear()]),(n.page.type===0&&t||t)&&Kt(t,n.page.snap),i.length>0?nt(i):Promise.resolve()},z=(e,t,r=!0)=>{r&&!ee(e.attributes)||(e.hasAttribute(n.qs.s)?xs(e,e.getAttribute(n.qs.s),t):Jt(e,t,null,null))},ys=(e,t)=>{let r=e.trim().replace(/\s+/," ").split(/[|, ]/);for(let s=0,o=0,i=r.length;s<i;s++)r[s]!==""&&((o=s+2)<i&&r[s+1]==="as"?(t(G(r[s]),G(r[o])),s=o):t(G(r[s]),null))},vs=(e,t)=>{let r=e.length,s=0;for(;++s<r;){let{name:o,value:i}=e[s];if(!n.qs.N.test(o)||o.startsWith(n.qs.d)||!i)continue;let a=o.slice(n.config.schema.length).split(":").pop();t.attrs===null&&(t.attrs=f()),a in t.attrs||(t.attrs[a]=bs(i))}},ee=e=>{if(typeof e=="string")return e.indexOf("@")>-1||e===n.qs.s||e===n.qs.p||e===n.qs.u;for(let t=e.length-1;t>=0;t--)if(ee(e[t].name))return!0;return!1},xe=(e,t)=>(e.status===2||e.status===3)&&e.dom?e.dom.contains(t):!1,it=e=>Vr(e.replace(/\s \./g,".")).replace(/\s+/g," ").trim().split(/[ ,]/),bs=e=>{if(ze.test(e))return e==="NaN"?NaN:+e;if(Xe.test(e))return e==="true";let t=e.charCodeAt(0);return t===123||t===91?K(e):e},Re=(e=null,t=null)=>{let r=f();return r.i=f(),r.t=f(),r.A=null,r.O=e?f():null,r.l=e,r.P=t,r},Me=(e,t,r,s)=>(r||(r=e.getAttribute(t)),`${e.nodeName.toLowerCase()}[${t}${s?"*=":"="}"${r}"]`),Ie=(e,{t,i:r})=>e in r?be(t[r[e]]):e in t?be(t[e]):(t[e]=[Je([e])])[0],We=(e,t,r,s)=>{n.maps[r]=t;let o=e.getAttribute(n.qs.e);return e.setAttribute(n.qs.e,o?`${o},${r}`:r),s&&fs(s,r),r},Je=([e,t=null],r,s)=>{let o=f();if(o.key=Q(),o.ref=`c.${o.key}`,o.status=5,o.state=f(),o.nodes=f(),o.binds=f(),o.events=f(),r&&(o.snap=null,o.status=2,o.inFragment=lt(r),o.alias=t||null,o.dom=r,We(r,o.key,o.ref,Me(r,n.qs.s))),n.registry.has(e))if(o.instanceOf=e,o.alias)if(n.registry.has(o.alias))A(`Component alias "${o.alias}" matched a component identifier in the registry`);else if(o.alias in s.t){for(let{events:i,nodes:a,binds:l}of s.t[o.alias]){if("events"in o)for(let c in i)o.events[c]=i[c],n.maps[c]=o.key;if("nodes"in o)for(let c in a)o.nodes[c]=a[c],n.maps[c]=o.key;if("binds"in o)for(let c in l)o.binds[c]=l[c],n.maps[c]=o.key}delete s.t[o.alias]}else s.i[o.alias]=e;else o.alias=null;else e?o.alias=e:o.instanceOf=null,o.status===2&&(s.i[o.alias]=null);return o},$s=(e,t,r,s)=>{let o=t.slice(n.config.schema.length),i=o.startsWith("window:"),a=r.indexOf("{"),l=r.trim().split(a>-1?new RegExp("(?<=[$_\\w}])\\s+(?=[$_\\w])"):/\s+/);for(let c=0,d=l.length;c<d;c++){let p=l[c],m=new AbortController,u=f();u.key=`e.${Q()}`,u.isWindow=i,u.eventName=i?o.slice(7):o,u.attached=!1,u.selector=Me(e,Br(t),p,!0),u.attrs=null,u.options={signal:m.signal};let T=p;if(a>-1){let R=p.slice(a,p.lastIndexOf("}",a)).match(/(passive|once|capture)/g);R!==null&&(u.options.once=R.indexOf("once")>-1,u.options.passive=R.indexOf("passive")>-1,u.options.capture=R.indexOf("capture")>-1),T=p.slice(0,a)}let[ue,he]=it(T)[0].split("."),h=Ie(ue,s);u.listener=m,u.method=he.trim(),u.isChild=xe(h,e),ie(u,"dom",e,!0),We(e,h.key,u.key,u.selector),h.events[u.key]=u}},ws=(e,t,r)=>{let s=it(t);for(let o of s){let[i,a]=o.split("."),l=Ie(i,r);a in l.nodes?(l.nodes[a].live++,l.nodes[a].isChild=xe(l,e)):l.nodes[a]=f({name:a,selector:`[${n.qs.p}*="${t}"]`,dom:f(),key:`c.${l.key}`,live:1,isChild:xe(l,e)})}},ks=(e,t,r)=>{var s;for(let o of it(t)){let[i,a]=o.split("."),l=Ie(i,r),c=`[${n.qs.u}="${t}"]`,d=We(e,l.key,`b.${Q()}`,`${e.nodeName.toLowerCase()}${c}`);(s=l.binds)[a]||(s[a]=f()),l.binds[a][d]=f({key:d,stateKey:a,selector:c,value:e.innerText,live:!0,stateAttr:`${n.config.schema}${i}:${a}`,isChild:xe(l,e)}),Object.defineProperty(l.binds[a][d],"dom",{get:()=>e})}},Jt=(e,t,r,s)=>{r===null&&s===null&&(t.A=Q());for(let o=e.attributes.length-1;o>=0;o--){let{name:i,value:a}=e.attributes[o];if(r){let l=`${n.config.schema}${r}:`;s&&!i.startsWith(l)&&(l=`${n.config.schema}${s}:`),i.startsWith(l)&&(Ie(r,t).state[G(i.slice(l.length))]=a)}i.indexOf("@")>-1?$s(e,i,a,t):i===n.qs.u?ks(e,a,t):i===n.qs.p&&ws(e,a,t)}},xs=(e,t,r)=>{ys(t,(s,o)=>{if(!n.registry.has(s))g(`Component does not exist in registry: ${s}`);else{let i;s in r.t?(i=be(r.t[s]),i.status===5?(i.status=2,i.inFragment=lt(e),i.dom=e,We(e,i.key,i.ref,Me(e,n.qs.s))):r.t[s].push(Je([s,o],e,r))):r.t[s]=[Je([s,o],e,r)],i=be(r.t[s]),o?r.i[o]=s:i.alias&&!(i.alias in r.i)&&(n.registry.has(i.alias)?(g(`Alias cannot use a component identifier: ${i.instanceOf} as ${i.alias}`),i.alias=null):r.i[i.alias]=s),Jt(e,r,s,i.alias)}})},at=(e,t=null)=>{let r=Re();if(!e&&!t){let{ownerDocument:s}=_e(n.snapDom.body);Ve(q(),o=>z(o,r)),Ue(r.t)||Ge(r,s)}else if(t){let s;n.snapDom.querySelector(t)?s=_e(n.snapDom.querySelector(t)).ownerDocument:g(`Cannot find element in snapshot using selector: ${t}`),Ve(e,o=>z(o,r)),Ue(r.t)||Ge(r,s)}else return e instanceof Set?(e.forEach(s=>z(s,r)),e.clear(),r):(z(e,r),r)},lt=e=>{for(let[t,r]of n.fragments)if(t===e.id||r.contains(e))return!0;return!1},Zt=()=>{n.fragments.clear();let e,t,r,s=q();if(n.page.target.length>0?(t=n.qs.f,e=n.page.target.join(),r=ts(s.querySelectorAll(`[id][${n.qs.s}]`))):(t=n.qs.h,e=n.config.fragments.length===1&&n.config.fragments[0]==="body"?n.qs.y:`${n.config.fragments.join()},${n.qs.y}`),V(e,o=>{if(r){for(let i of r)if(o.contains(i)){r.delete(i);break}}if(o.hasAttribute(t)){let i=o.getAttribute(t).trim();o.id!==k&&(i==="true"||i===k)?n.fragments.set(`#${o.id}`,o):n.fragments.set(Me(o,t,i),o)}else n.fragments.set(`#${o.id}`,o)}),r&&r.size>0){for(let o of r)n.fragments.set(`#${o.id}`,o),n.page.target.push(`#${o.id}`),v.marks.add(o.id);r.clear()}De("fragments",[...n.fragments.keys()])},As=e=>{e.type===6||e.selector==="body"||e.selector===null||re(()=>{let t=pe(e.snap),r=t.body.querySelectorAll(n.qs.E),s=q().querySelectorAll(n.qs.E);V(r,(o,i)=>{if(lt(o))g("The fragment or target is a decedent of an element which morphs",o);else{if(!o.hasAttribute("id"))o.setAttribute("id",`t.${Q()}`),s&&s[i].setAttribute("id",`t.${Q()}`);else if(o.id.startsWith("t."))return;e.target.push(o.id)}}),Pe(e.snap,t.documentElement.outerHTML)})},L=e=>{let t=Ht(e);return e.ts=Dt(),e.target=Ft(e),e.selector=rt(e.target),n.config.cache&&(t("cache")||(e.cache=n.config.cache),e.snap||(e.snap=Xt())),n.config.hover!==!1&&e.type===10&&(e.threshold||(e.threshold=n.config.hover.threshold)),n.config.proximity!==!1&&e.type===12&&(e.proximity||(e.proximity=n.config.proximity.distance),e.threshold||(e.threshold=n.config.proximity.threshold)),n.config.progress&&(e.progress||(e.progress=n.config.progress.threshold)),t("history")||(e.history=!0),e.scrollY||(e.scrollY=0),e.scrollX||(e.scrollX=0),e.fragments||(e.fragments=n.config.fragments),e.visits||(e.visits=0),e.location||(e.location=Ae(e.key)),n.pages[e.key]=e,n.pages[e.key]},qs=e=>{let t=f(Ar(xr({},e),{target:[],selector:null,cache:n.config.cache,history:!0,scrollX:0,scrollY:0,fragments:n.config.fragments})),r=n.config.hover,s=n.config.proximity;return r&&(t.threshold=r.threshold),s&&(t.proximity=s.distance,t.threshold=s.threshold),n.config.progress&&(t.progress=n.config.progress.threshold),t},De=(e,t,r=n.history.key)=>{r in n.pages&&e in n.pages[r]&&(e==="location"?n.pages[r][e]=Object.assign(n.pages[e][r],t):e==="target"?(n.pages[r].target=Ft(t),n.pages[r].selector=rt(n.pages[r].target)):n.pages[r][e]=t)},ct=(e,t)=>{e.type>5&&e.type>9&&(e.type=1),e.title=Ut(t);let r=O("cache",e,t),s=typeof r=="string"?r:t;return!n.config.cache||r===!1?e:e.type!==0&&!I(e,"snap")?te(e,s):(n.pages[e.key]=e,n.snaps[e.snap]=s,As(e),e)},te=(e,t=null)=>{let r=e.key in n.pages?n.pages[e.key]:L(e);return t&&(n.snaps[r.snap]=t,e.title=Ut(t)),Object.assign(r,e)},Cs=e=>{if(!e){if(n.history===null){g("Missing history state reference, page cannot be returned");return}e=n.history.key}if(e in n.pages)return{get page(){return n.pages[e]},get dom(){return Te(n.snaps[n.pages[e].snap])}};A(`No record exists: ${e}`)},pe=e=>{let t=typeof e=="number"?e:typeof e=="string"&&e.charCodeAt(0)===47?n.pages[e].snap:n.page.snap;return Te(n.snaps[t])},Es=()=>{let e=M();for(let t of n.mounted){if(!n.instances.has(t))continue;let r=n.instances.get(t),{scope:s}=r;s.inFragment===!0&&(s.status===2||s.status===3)&&(s.alias!==null&&(e.has(s.alias)?e.get(s.alias).push(r):e.set(s.alias,[r])),e.has(s.instanceOf)?e.get(s.instanceOf).push(r):e.set(s.instanceOf,[r]))}return e},Os=e=>{if(!e){if(n.history===null){g("Missing history state reference, page cannot be returned");return}e=n.history.key}if(I(n.pages,e))return n.pages[e];A(`No page record exists for: ${e}`)},W=e=>I(n.pages,e)&&I(n.pages[e],"snap")&&I(n.snaps,n.pages[e].snap)&&typeof n.snaps[n.pages[e].snap]=="string",le=e=>{e?typeof e=="string"?(delete n.snaps[n.pages[e].snap],delete n.pages[e]):Array.isArray(e)&&H(t=>{delete n.snaps[n.pages[t].snap],delete n.pages[t]},e):(xt(n.snaps),xt(n.pages))},x=de.replace(/(?:https?:)?(?:\/\/(?:www\.)?|(?:www\.))/,k),Qt=(e,t)=>{let r=t?qs(t):f(),s=e.getAttributeNames();for(let o=0,i=s.length;o<i;o++){let a=s[o];if(a.startsWith(n.qs.d)){I(r,"data")||(r.data=f());let l=G(a.slice(n.qs.d.length)),c=e.getAttribute(a).trim();ze.test(c)?r.data[l]=c==="NaN"?NaN:+c:Xe.test(c)?r.data[l]=c==="true":c.charCodeAt(0)===123||c.charCodeAt(0)===91?r.data[l]=K(a,c):r.data[l]=c}else{if(!n.qs.w.test(a))continue;let l=e.getAttribute(a).trim();if(a==="href")r.rev=j(location),t||(r.location=Ae(l),r.key=j(r.location));else{let c=a.slice(a.lastIndexOf("-")+1),d=l.replace(Hr,k).trim();if(c==="target")r[c]=d==="true"?[]:d!==k?Yr(d):[],r.selector=rt(r[c]);else if(zr.test(d)){let p=d.match(/\[?[^,'"[\]()\s]+\]?/g);r[c]=Dr.test(c)?p.reduce(Jr(2),[]):p}else if(c==="position")if($t.test(d)){let p=d.match($t);r[`scroll${p[0].toUpperCase()}`]=+p[1],p.length===4&&(r[`scroll${p[2].toUpperCase()}`]=+p[3])}else g(`Invalid ${a} value, expected: y:number or x:number`,e);else c==="scroll"?It.test(d)?r.scrollY=+d:g(`Invalid ${a} value, expected: number`,e):Xe.test(d)&&!Fr.test(a)?r[c]=d==="true":ze.test(d)?r[c]=+d:(c==="history"&&d!=="push"&&d!=="replace"&&g(`Invalid ${a} value, expected: false, push or replace`,e),r[c]=d)}}}return r},_=e=>{let t=f();if(e.length===1&&e.charCodeAt(0)===47)return t.pathname=e,t.hash=k,t.search=k,t;let r=e.indexOf("#");r>=0?(t.hash=e.slice(r),e=e.slice(0,r)):t.hash=k;let s=e.indexOf("?");return s>=0?(t.search=e.slice(s),e=e.slice(0,s)):t.search=k,t.pathname=e,t},ge=(e,t)=>{let r=e.indexOf("/",t);if(r>t){let o=e.indexOf("#",r);return o<0?e.slice(r):e.slice(r,o)}let s=e.indexOf("?",t);if(s>t){let o=e.indexOf("#",s);return o<0?e.slice(s):e.slice(s,o)}return e.length-t===x.length?"/":null},Fe=e=>{let t=e.startsWith("www.")?e.slice(4):e,r=t.indexOf("/");if(r>=0){let s=t.slice(r);if(t.slice(0,r)===x)return s.length>0?_(s):_("/")}else{let s=t.search(/[?#]/);if(s>=0){if(t.slice(0,s)===x)return _("/"+t.slice(s))}else if(t===x)return _("/")}return null},Ns=e=>e.startsWith("http:")||e.startsWith("https:")?1:e.startsWith("//")?2:e.startsWith("www.")?3:0,er=e=>{if(typeof e!="string"||e.length===0)return!1;if(e.charCodeAt(0)===47)return e.charCodeAt(1)!==47?!0:e.startsWith("www.",2)?e.startsWith(x,6):e.startsWith(x,2);if(e.charCodeAt(0)===63)return!0;if(e.startsWith("www."))return e.startsWith(x,4);if(e.startsWith("http")){let t=e.indexOf("/",4)+2;return e.startsWith("www.",t)?e.startsWith(x,t+4):e.startsWith(x,t)}return!1},Ts=e=>e.charCodeAt(0)===47?e.charCodeAt(1)!==47?_(e):Fe(e.slice(2)):e.charCodeAt(0)===63?_(location.pathname+e):e.startsWith("https:")||e.startsWith("http:")?Fe(e.slice(e.indexOf("/",4)+2)):e.startsWith("www.")?Fe(e):null,j=e=>{if(typeof e=="object")return e.pathname+e.search;if(e===k||e==="/")return"/";let t=Ns(e);if(t===1){let r=e.charCodeAt(4)===115?8:7,s=e.startsWith("www.",r)?r+4:r;return e.startsWith(x,s)?ge(e,s):null}if(t===2){let r=e.startsWith("www.",2)?6:2;return e.startsWith(x,r)?ge(e,r):null}return t===3?e.startsWith(x,4)?ge(e,4):null:e.startsWith(x,0)?ge(e,0):e.charCodeAt(0)===47?e:null},tr=({pathname:e,search:t,hash:r}=location)=>f({hostname:x,origin:de,pathname:e,hash:r,search:t}),Ae=e=>{if(e===k)return tr();let t=Ts(e);return t===null&&g(`Invalid pathname: ${e}`),t.origin=de,t.hostname=x,t},C=(e,t=6)=>{if(e instanceof Element){let s=Qt(e);return s.type=t||6,s}let r=f();return e===0?(r.location=tr(),r.key=r.rev=j(r.location),r.type=e,r.visits=1,n.index=r.key):t===7||t===4?(r.location=Ae(e),r.key=r.rev=j(r.location),r.type=t):(r.rev=location.pathname+location.search,r.location=Ae(typeof e=="string"?e:r.rev),r.key=j(r.location),r.type=t),r},He=(e,{method:t="GET",body:r=null,headers:s=[["spx-http","href"]],type:o="text"}={})=>new Promise((i,a)=>{let l=new y;l.key=e,l.responseType=o,l.open(t,e,!0);for(let[c,d]of s)l.setRequestHeader(c,d);l.onloadstart=function(){y.o.set(this.key,l)},l.onload=function(){i(this.response)},l.onerror=function(){a(this.statusText)},l.onabort=function(){delete y.r[this.key],y.c.delete(this.key),y.o.delete(this.key)},l.onloadend=function(c){y.o.delete(this.key),n.memory.bytes=n.memory.bytes+c.loaded,n.memory.visits=n.memory.visits+1},l.send(r)}),rr=e=>e in y.r?(clearTimeout(y.r[e]),delete y.r[e]):!0,sr=(e,t,r)=>{e in y.r||W(e)||(y.r[e]=setTimeout(t,r))},Nt=e=>{for(let[t,r]of y.o)e!==t&&(r.abort(),g(`Pending request aborted: ${t}`))},Ss=e=>{if(n.config.preload!==null){if(Array.isArray(n.config.preload)){let t=n.config.preload.filter(r=>{let s=C(r,3);return s.key!==r?N(L(s)):!1});return Promise.allSettled(t)}else if(typeof n.config.preload=="object"&&I(n.config.preload,e.key)){let t=n.config.preload[e.key].map(r=>N(L(C(r,3))));return Promise.allSettled(t)}}},nr=async e=>{if(e.rev===e.key)return;let t=L(C(e.rev,4));await Kr(),N(t).then(r=>{r?X(`Reverse fetch completed: ${r.rev}`):g(`Reverse fetch failed: ${e.rev}`)})},dt=async e=>{if(!y.c.has(e.key))return e;let t=await y.c.get(e.key);return y.c.delete(e.key),delete y.r[e.key],ct(e,t)},N=async e=>y.o.has(e.key)&&e.type!==7?(e.type===4&&y.o.has(e.rev)?(y.o.get(e.rev).abort(),g(`Request aborted: ${e.rev}`)):g(`Request in transit: ${e.key}`),!1):O("fetch",e)?(y.c.set(e.key,He(e.key)),dt(e)):(g(`Request cancelled via dispatched event: ${e.key}`),!1),Ze=(e,t,r)=>{e[r]!==t[r]&&(e[r]=t[r],e[r]?e.setAttribute(r,k):e.removeAttribute(r))},Ls=(e,t)=>{if(t.nodeType===11||e.nodeType===11)return;let r=t.attributes,s=e.getAttribute(n.qs.e),o=t.getAttribute(n.qs.e),i=!1,a,l,c,d,p;for(let u=r.length-1;u>=0;u--)a=r[u],l=a.name,d=a.value,c=a.namespaceURI,c?(l=a.localName||l,p=e.getAttributeNS(c,l),p!==d&&(a.prefix==="xmlns"&&(l=a.name),e.setAttributeNS(c,l,d))):(p=e.getAttribute(l),p!==d&&(e.setAttribute(l,d),!s&&!o&&!i&&(i=ee(l))));let m=e.attributes;for(let u=m.length-1;u>=0;u--)m[u]!==void 0&&(a=m[u],l=a.name,d=a.value,c=a.namespaceURI,c?(l=a.localName||l,t.hasAttributeNS(c,l)||e.removeAttributeNS(c,l)):(t.hasAttribute(l)||e.removeAttribute(l),i||(i=ee(l))));(s||o||i)&&ps(e,t,s,o)},Ps=(e,t)=>{let r=e.parentNode;if(r){let s=r.nodeName.toUpperCase();s==="OPTGROUP"&&(r=r.parentNode,s=r&&r.nodeName.toUpperCase()),s==="SELECT"&&!r.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),r.selectedIndex=-1)}Ze(e,t,"selected")},js=(e,t)=>{Ze(e,t,"checked"),Ze(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},or=(e,t)=>{let{value:r}=t;e.value!==r&&(e.value=r);let{firstChild:s}=e;if(s){let{nodeValue:o}=s;if(o===r||!r&&o===e.placeholder)return;s.nodeValue=r}},Rs=(e,t)=>{if(!t.hasAttribute("multiple")){let r=0,s=-1,o=e.firstElementChild,i,a;for(;o;)if(a=o.nodeName&&o.nodeName.toUpperCase(),a==="OPTGROUP")i=o,o=i.firstElementChild;else{if(a==="OPTION"){if(o.hasAttribute("selected")){s=r;break}r++}o=o.nextElementSibling,!o&&i&&(o=i.nextElementSibling,i=null)}e.selectedIndex=s}},Ms=(e,t)=>!t||t==="http://www.w3.org/1999/xhtml"?document.createElement(e):document.createElementNS(t,e),qe=(e,t)=>{if(e===t)return!0;let r=e.charCodeAt(0),s=t.charCodeAt(0);return r<=90&&s>=97?e===t.toUpperCase():s<=90&&r>=97?t===e.toUpperCase():!1},Is=(e,t)=>{switch(e.nodeName){case"INPUT":js(e,t);break;case"OPTION":Ps(e,t);break;case"SELECT":Rs(e,t);break;case"TEXTAREA":or(e,t);break}},F=e=>e&&"getAttribute"in e?e.getAttribute("id"):void 0,Ws=(e,t)=>{let r=e.firstChild,s;for(;r;)s=r.nextSibling,t.appendChild(r),r=s;return t},Ce=(e,t,r,s=!0)=>{we(e),t&&t.removeChild(e),ir(e,s,r)},Ds=e=>{e.nodeType===1&&e.hasAttribute(n.qs.p)&&ds(e)},Hs=(e,t,r)=>{let s=t.firstChild,o,i,a=e.firstChild,l,c,d,p;e:for(;s;){for(o=F(s),i=s.nextSibling;a;){if(d=a.nextSibling,s.isEqualNode(a)){Ds(a),s=i,a=d;continue e}l=F(a),c=a.nodeType;let m;if(c===s.nodeType&&(c===1?(o?o!==l&&((p=r.n.get(o))?d&&d.isEqualNode(p)?m=!1:(e.insertBefore(p,a),l?r.a.add(l):Ce(a,e,r),a=p,l=F(a)):m=!1):l&&(m=!1),m=m!==!1&&qe(a.nodeName,s.nodeName),m&&Ee(a,s,r)):(c===3||c===8)&&(m=!0,a.nodeValue!==s.nodeValue&&(a.nodeValue=s.nodeValue))),m){s=i,a=d;continue e}l?r.a.add(l):Ce(a,e,r),a=d}o&&(p=r.n.get(o))&&qe(p.nodeName,s.nodeName)?(e.appendChild(p),Ee(p,s,r)):(s.actualize&&(s=s.actualize(e.ownerDocument||document)),e.appendChild(s),Qe(s,r)),s=i,a=d}Fs(e,a,l,r),Is(e,t)},Ee=(e,t,r)=>{let s=F(t);if(s&&r.n.delete(s),e.isEqualNode(t))return;let o=e.getAttribute(n.qs.l);o!=="false"&&(o!=="children"&&Ls(e,t),e.nodeName==="TEXTAREA"?or(e,t):Hs(e,t,r))},ir=(e,t,r)=>{if(e.nodeType!==1)return;let s=e.firstChild;for(;s;){let o;t&&(o=F(s))?r.a.add(o):(we(s),s.firstChild&&ir(s,t,r)),s=s.nextSibling}},Qe=(e,t)=>{(e.nodeType===1||e.nodeType===11)&&cs(e);let r=e.firstChild;for(;r;){let s=r.nextSibling,o=F(r);if(o){let i=t.n.get(o);i&&qe(r.nodeName,i.nodeName)?(r.parentNode.replaceChild(i,r),Ee(i,r,t)):Qe(r,t)}else Qe(r,t);r=s}},Fs=(e,t,r,s)=>{for(;t;){let o=t.nextSibling;(r=F(t))?s.a.add(r):Ce(t,e,s),t=o}},ar=(e,t)=>{if(e.nodeType===1||e.nodeType===11){let r=e.firstChild;for(;r;){let s=F(r);s&&t.n.set(s,r),ar(r,t),r=r.nextSibling}}},Oe=(e,t)=>{let r=t.cloneNode(!0),s=f();s.a=Y(),s.n=M(),r.nodeType===11&&(r=r.firstElementChild),ar(e,s);let o=e,i=o.nodeType,a=r.nodeType;if(i===1)a===1?qe(e.nodeName,r.nodeName)||(we(e),o=Ws(e,Ms(r.nodeName,r.namespaceURI))):o=r;else if(i===3||i===8){if(a===i)return o.nodeValue!==r.nodeValue&&(o.nodeValue=r.nodeValue),o;o=r}if(o.isEqualNode(r))we(e);else{if(r.isEqualNode(o))return o;if(Ee(o,r,s),s.a.size>0){for(let l of s.a)if(s.n.has(l)){let c=s.n.get(l);Ce(c,c.parentNode,s,!1)}}}return o!==e&&e.parentNode&&(o.actualize&&(o=o.actualize(e.ownerDocument||document)),e.parentNode.replaceChild(o,e)),s.n.clear(),s.a.clear(),o},pt=(e,t)=>{if(!(e instanceof Element))return!1;let r=e.closest(t);return r&&r.tagName==="A"?r:!1},ft=e=>{if(e.nodeName!=="A")return 2;let t=e.getAttribute("href");if(!t||!er(t))return 2;let r=j(t);return r===null||W(r)?2:1},Xs=(e,t)=>{let r=[];return V(e,s=>{if(s.nodeName!=="A")V(t,o=>ft(o)===1?r.push(o):null);else if(s.hasAttribute("href")&&er(s.href)){let o=j(s.href);j(o)!==null&&W(o)===!1&&r.push(s)}}),r},ut=e=>{let t=[];return V(e,r=>ft(r)===1?t.push(r):null),t},lr=e=>{let t=pt(e.target,n.qs.m);if(!t)return;let r=C(t,10);if(W(r.key)||r.key in y.r)return;t.addEventListener(`${E}leave`,cr,{once:!0});let s=L(r),o=s.threshold||n.config.hover.threshold;sr(r.key,function(){O("prefetch",r,t)&&N(s).then(function(){delete y.r[r.key],dr(t)})},o)},cr=e=>{let t=pt(e.target,n.qs.m);t&&rr(j(t.href))},zs=e=>e.addEventListener(`${E}enter`,lr),dr=e=>{e.removeEventListener(`${E}enter`,lr),e.removeEventListener(`${E}leave`,cr)},pr=()=>{!n.config.hover||n.observe.hover||(H(zs,ut(n.qs.m)),n.observe.hover=!0)},ht=()=>{n.observe.hover&&(H(dr,ut(n.qs.m)),n.observe.hover=!1)},U,Us=async e=>{if(e.isIntersecting){let t=C(e.target,11);if(!O("prefetch",t,e.target))return U.unobserve(e.target);await N(L(t))?U.unobserve(e.target):(g(`Prefetch will retry at next intersection for: ${t.key}`),U.observe(e.target))}},fr=()=>{if(!n.config.intersect||n.observe.intersect)return;U||(U=new IntersectionObserver(H(Us),n.config.intersect));let e=H(r=>U.observe(r)),t=Xs(n.qs.C,n.qs.L);e(t),n.observe.intersect=!0},gt=()=>{n.observe.intersect&&(U.disconnect(),n.observe.intersect=!1)};J.qs=null;function J(e){let t=n.resources.has(e);J.qs===null&&(J.qs=q().querySelectorAll(`${n.page.target.join()},[${n.qs.f}]`));let r=J.qs,s=r.length,o=-1;for(;++o<s;)if(r[o].contains(e))return t&&!1;return t&&!0}var ur=(e,t)=>n.eval&&Xr.test(t.nodeName)?(t.parentNode.nodeName==="HEAD"?us(e,t):J(t)?n.resources.delete(t):n.resources.add(t),!1):!0,Ys=(e,t)=>{let r=-1;for(;++r<t;){let s=e[r];s.nodeType===1&&ur("appendChild",s)&&s instanceof HTMLElement&&s.hasAttribute(n.qs.s)&&at(s,Gr(s.parentElement))}},Vs=(e,t)=>{let r=-1;for(;++r<t;){let s=e[r];if(s.nodeType===1&&ur("removeChild",s)&&s instanceof HTMLElement){let o=s.getAttribute(n.qs.e);s.getAttribute(n.qs.e)&&$e(s,o.split(","))}}},Ne=new MutationObserver(([e])=>{if(e.type!=="childList")return;let t=e.addedNodes.length,r=e.removedNodes.length;t===0&&r===0||(t>0&&Ys(e.addedNodes,t),r>0&&Vs(e.removedNodes,r))}),Bs=()=>{n.observe.mutations||(Ne.observe(Mt(),{childList:!0}),Ne.observe(q(),{childList:!0,subtree:!0}),n.observe.mutations=!0)},Ks=()=>{if(n.observe.mutations){Ne.takeRecords(),Ne.disconnect();for(let e of n.resources)q().removeChild(e),n.resources.delete(e);J.qs=null,n.observe.mutations=!1}},_s=({clientX:e,clientY:t},r)=>e<=r.right&&e>=r.left&&t<=r.bottom&&t>=r.top,Gs=e=>{let t=e.getBoundingClientRect(),r=e.getAttribute(n.qs.x),s=It.test(r)?Number(r):n.config.proximity.distance;return{target:e,top:t.top-s,bottom:t.bottom+s,left:t.left-s,right:t.right+s}},Js=(e,t=!1)=>r=>{if(t)return;t=!0;let s=e.findIndex(o=>_s(r,o));if(s===-1)re(()=>t=!1,n.config.proximity.throttle);else{let{target:o}=e[s];if(ft(o)===2)e.splice(s,1);else{let i=L(C(o,12)),a=i.threshold||n.config.proximity.threshold;sr(i.key,async()=>{if(!O("prefetch",i,o))return ce();await N(i)&&(e.splice(s,1),t=!1,e.length===0&&(ce(),X("Proximity observer disconnected")))},a)}}},et,hr=()=>{if(!n.config.proximity||n.observe.proximity)return;let e=ut(n.qs.x).map(Gs);e.length>0&&(et=Js(e),addEventListener(`${E}move`,et,{passive:!0}),n.observe.proximity=!0)},ce=()=>{n.observe.proximity&&(removeEventListener(`${E}move`,et),n.observe.proximity=!1)},Zs=async(e,t,r)=>{if(!n.eval||!t.children||!r.children)return;let s=t.children,o=Y(),i=r.children,a=[];for(let d=0,p=i.length;d<p;d++)wt(i[d])&&o.add(i[d].outerHTML);for(let d=0,p=s.length;d<p;d++){let m=s[d],u=wt(m),T=m.outerHTML;o.has(T)?u?a.push(m):o.delete(T):u&&a.push(m)}let l=[],c=document.createRange();for(let d of o){let p=c.createContextualFragment(d).firstChild;if(I(p,"href")||I(p,"src")){if(!O("resource",e,p))continue;let m,u=new Promise(T=>m=T);p.addEventListener("load",()=>m()),p.addEventListener("error",T=>{g(`Resource <${p.nodeName.toLowerCase()}> failed:`,T),m()}),l.push(u)}t.appendChild(p),o.delete(d)}for(let d=0,p=a.length;d<p;d++)t.removeChild(a[d]);await Promise.allSettled(l)},Qs=(e,t)=>{let r=q();if(e.selector==="body"||e.fragments.length===0)Oe(r,t.body);else{let s=e.target.length>0?n.fragments.keys():e.fragments,o=n.registry.size>0,i="render"in n.events;for(let a of s){let l=n.fragments.get(a),c=t.body.querySelector(a);if(!(!c||!l)&&!(i&&!O("render",e,l,c)))if(v.marks.has(c.id))c.setAttribute(n.qs.e,l.getAttribute(n.qs.e));else{if(l.isEqualNode(c))continue;o&&_e(c),Oe(l,c)}}}if(v.store&&Kt(t,e.snap),e.type!==6&&De("type",6),e.location.hash!==k){let s=r.querySelector(e.location.hash);s&&s.scrollIntoView()}scrollTo(e.scrollX,e.scrollY)},D=e=>{ht(),gt(),ce(),Ks(),ot(),Zt(),n.eval===!1&&(document.title=e.title);let t=pe(e.snap);return Zs(e,Mt(),t.head),Qs(e,t),Se.done(),pr(),fr(),hr(),je(),Bs(),O("load",e),e},b=window.history,en=()=>b.state!==null&&"spx"in b.state&&"rev"in b.state.spx&&b.state.spx.key!==b.state.spx.rev,gr=e=>{if(b.state===null||typeof b.state!="object"||!("spx"in b.state))return!1;let t=Ht(b.state.spx)(["key","rev","scrollX","scrollY","title","target"]);return typeof e=="string"?t&&b.state.spx.key===e:t},tn=async()=>{await Wt(),n.loaded=!0},rn=e=>(gr(e.key)?(Object.assign(e,b.state.spx),scrollTo(b.state.spx.scrollX,b.state.spx.scrollY)):se(e),e),se=({key:e,rev:t,title:r,scrollX:s,scrollY:o,target:i})=>(b.replaceState({spx:f({key:e,rev:t,scrollX:s,scrollY:o,target:i,title:r||document.title})},r,e),w(`History replaceState: ${e}`),b.state.spx),fe=({key:e,rev:t,title:r,scrollX:s,scrollY:o,target:i})=>(b.pushState({spx:f({key:e,rev:t,scrollX:s,scrollY:o,target:i,title:r||document.title})},r,e),w(`History pushState: ${e}`),b.state.spx),mr=async e=>{if(e.state===null||!("spx"in e.state))return;let{spx:t}=e.state;if(W(t.key)){if(!W(t.rev)&&t.rev!==t.key&&nr(t),De("type",5,t.key),!O("popstate",n.pages[t.key]))return;let{type:r,key:s}=D(n.pages[t.key]);w(`History popState ${r===4?"session":"reverse"}: ${s}`)}else{if(w(`History popState fetch: ${t.key}`),t.type=5,!O("popstate",t))return;let r=await N(t);if(!r)return location.assign(t.key);let s=j(location);if(r.key===s)w(`History popState fetch Complete: ${t.key}`),r.target=[],r.selector=null,D(r);else if(W(s))D(n.pages[s]);else{let o=L(C(s,5));if(!O("popstate",o))return;let i=await N(o);i&&fe(i)}}},sn=e=>{if(!n.observe.history)return addEventListener("popstate",mr,!1),n.observe.history=!0,typeof e=="object"&&e.type===0?rn(e):e},nn=()=>{n.observe.history&&(b.scrollRestoration&&(b.scrollRestoration="auto"),removeEventListener("popstate",mr,!1),removeEventListener("load",tn,!1),n.observe.history=!1)},on=e=>{for(let t of["hover","intersect","proximity","progress"])I(e,t)&&(e[t]===!1?n.config[t]=!1:typeof e[t]=="object"&&Object.assign(n.config[t],e[t]),delete e[t]);return e},oe=(e,t)=>{let r=`:not([${e}${t}=false]):not([${e}link]):not`;switch(t.charCodeAt(0)){case 104:return`${r}([${e}proximity]):not([${e}intersect])`;case 105:return`${r}([${e}hover]):not([${e}proximity])`;case 112:return`${r}([${e}intersect]):not([${e}hover])`}},an=(e,t,r)=>{if("eval"in e)if(e.eval){if(typeof e.eval=="object"){let s=Object.assign(n.config.eval,e.eval);n.eval=!(s.link===!1&&s.meta===!1&&s.script===!1&&s.style===!1)}}else n.eval=!1;return s=>{if(n.eval===!1||n.config.eval[s]===!1)return`${s}[${t}eval]:${r}`;if(n.config.eval[s]===!0)return`${s}:${r}`;let o=s==="link"?`${s}[rel=stylesheet]:${r}`:`${s}:${r}${s==="script"?`:not([${t}eval=hydrate])`:""}`;if(n.config.eval[s]===null)return o;if(Array.isArray(n.config.eval[s]))return n.config.eval[s].length>0?n.config.eval[s].map(i=>`${i}:${r}`).join(","):(g(`Missing eval ${s} value, default will be used`),o);A(`Invalid "eval" ${s} value, expected boolean or array type`)}},ln=e=>{let t=[];if("fragments"in e&&Array.isArray(e.fragments)&&e.fragments.length>0)for(let r of e.fragments){let s=r.charCodeAt(0);if(s===46||s===91){g(`Invalid fragment, only element id values allowed: "${r}"`);continue}else s===35?t.push(r.trim()):t.push(`#${r.trim()}`)}else return["body"];return t},cn=(e=f())=>{"logLevel"in e&&(n.logLevel=e.logLevel,n.logLevel===3&&w("DEBUG MODE")),ns(),Object.defineProperties(n,{history:{get:()=>typeof b.state=="object"&&"spx"in b.state?b.state.spx:null},ready:{get:()=>document.readyState==="complete"},types:{get:()=>f({INITIAL:0,PREFETCH:1,FETCH:2,PRELOAD:3,REVERSE:4,POPSTATE:5,VISIT:6,HYDRATE:7,CAPTURE:8,RELOAD:9,HOVER:10,INTERSECT:11,PROXIMITY:12})}}),"components"in e&&(B(e.components),delete e.components),Object.assign(n.config,on(e));let t=n.config.schema,r=t==="spx"?"spx":t.endsWith("-")?t:t===null?k:`${t}-`,s=`:not([${r}disable]):not([href^=\\#])`,o=`not([${r}eval=false])`,i=an(e,r,o);n.config.fragments=ln(e),n.config.schema=r,n.config.index=null,n.memory.bytes=0,n.memory.visits=0,n.memory.limit=n.config.maxCache,n.qs.w=new RegExp(`^href|${r}(hydrate|append|prepend|target|progress|threshold|scroll|position|proximity|hover|cache|history)$`,"i"),n.qs.q=new RegExp(`${r}(?:node|bind|component)|@[a-z]|[a-z]:[a-z]`,"i"),n.qs.N=new RegExp(`^${r}[a-zA-Z0-9-]+:`,"i"),n.qs.f=`${r}target`,n.qs.h=`${r}fragment`,n.qs.y=`[${n.qs.h}]`,n.qs.E=`[${r}target]:not(a[spx-target]):not([${r}target=false])`,n.qs.l=`${r}morph`,n.qs.b=`${r}eval`,n.qs.C=`[${r}intersect]${oe(r,"intersect")}`,n.qs.S=`[${r}track]:not([${r}track=false])`,n.qs.s=`${r}component`,n.qs.p=`${r}node`,n.qs.u=`${r}bind`,n.qs.e="data-spx",n.qs.M=`a${n.config.annotate?`[${r}link]`:""}${s}`,n.qs.g=i("script"),n.qs.H=i("style"),n.qs.T=i("link"),n.qs.v=i("meta"),n.qs.R=`script[${r}eval=hydrate]:${o}`,n.qs.D=`link[rel=stylesheet][href*=\\.css]:${o},script[src*=\\.js]:${o}`,n.qs.d=`${r}data:`,n.qs.x=`a[${r}proximity]${s}${oe(r,"proximity")}`,n.qs.L=`a${s}${oe(r,"intersect")}`,n.qs.m=n.config.hover!==!1&&n.config.hover.trigger==="href"?`a${s}${oe(r,"hover")}`:`a[${r}hover]${s}${oe(r,"hover")}`,Se.style(n.config.progress)},dn=e=>!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.button>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey),P=function(e){if(!dn(e))return;let t=pt(e.target,n.qs.M);if(!t)return;let r=j(t.href);if(r===null)return;let s=r===n.page.key,o=()=>{g(`Drag occurance, visit cancelled: ${r}`),P.drag=!0,t.removeEventListener(`${E}move`,o)};if(t.addEventListener(`${E}move`,o,{once:!0}),P.drag===!0)return P.drag=!1,P(e);t.removeEventListener(`${E}move`,o);let i=(a,l,c=!0)=>{a.preventDefault(),n.pages[l.key].ts=Dt(),n.pages[l.key].visits=l.visits+1,n.pages[l.key].target=n.pages[l.rev].target=l.target,n.pages[l.key].selector=n.pages[l.rev].selector=l.selector,n.pages[l.rev].scrollX=window.scrollX,n.pages[l.rev].scrollY=window.scrollY,!("visit"in n.events&&!O("visit",n.pages[l.key],a))&&(s?X(`Identical pathname, page visit skipped: ${r}`):(se(n.pages[l.rev]),c?(fe(l),D(l)):yr(l)))};if(ht(),ce(),gt(),W(r)){let a=Qt(t,n.pages[r]),l=te(a);t.onclick=c=>i(c,l)}else if(y.c.has(r)){Nt(r),X(`Request in transit: ${r}`);let a=n.pages[r];t.onclick=l=>i(l,a,!1)}else{Nt(),rr(r);let a=L(C(t,6));N(a),t.onclick=l=>i(l,a,!1)}};async function yr(e){e.progress&&Se.start(e.progress);try{let t=await dt(e);t?(t.history==="replace"?se(t):fe(t),D(t)):location.assign(e.key)}catch{location.assign(e.key)}}var Tt=async(e,t)=>{if(t){typeof t.cache=="string"&&(t.cache==="clear"?le():le(t.key)),t.progress&&Se.start(t.progress);let r=await N(t);r?(fe(r),D(r)):location.assign(t.key)}else return yr(n.pages[e])},pn=()=>{n.observe.hrefs||(P.drag=!1,me==="mouseOnly"?addEventListener(`${E}down`,P,!1):(me==="touchOnly"||addEventListener(`${E}down`,P,!1),addEventListener("touchstart",P,!1)),n.observe.hrefs=!0)},fn=()=>{n.observe.hrefs&&(me==="mouseOnly"?removeEventListener(`${E}down`,P,!1):(me==="touchOnly"||removeEventListener(`${E}down`,P,!1),removeEventListener("touchstart",P,!1)),n.observe.hrefs=!1)},un=()=>{let e=C(0),t=sn(L(e));Object.defineProperty(v,"refs",{configurable:!1,enumerable:!1,get(){return this.snaps.length>0?this.snaps[this.snaps.length-1][1]:M()}}),Object.defineProperties(n,{prev:{get:()=>n.pages[n.history.rev]},page:{get:()=>n.pages[n.history.key]},snapDom:{get:()=>Te(n.snaps[n.page.snap])}});let r=()=>{let s=ct(t,ae());return pn(),Zt(),pr(),fr(),hr(),je(),O("connect",s),Yt(()=>De("type",6),async()=>await nr(s),async()=>await Ss(s)),s};return new Promise(s=>{document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>s(r())):s(r())})},hn=()=>{nn(),fn(),ht(),gt(),ce(),n.config.components&&(ot(),Gt(),n.registry.clear()),le(),n.config.globalThis&&delete window.spx,X("Disconnected")};function $(e={}){if(!Rt)return A("Invalid runtime environment: window is undefined.");if(!$.supported)return A("Browser does not support SPX");if(!window.location.protocol.startsWith("http"))return A("Invalid protocol, SPX expects HTTPS or HTTP protocol");cn(e),n.config.globalThis&&window&&!("spx"in window)&&ie(window,"spx",$);let t=un();return async function(r){let s=await t;if(r.constructor.name==="AsyncFunction")try{await r(s)}catch(o){console.error(o),A("Connection Error",o)}else r(s);X("Connection Established")}}$.Component=Le;$.on=os;$.off=is;$.component=yn;$.live=mn;$.capture=An;$.form=Cn;$.render=xn;$.session=bn;$.reload=$n;$.fetch=wn;$.clear=le;$.hydrate=En;$.prefetch=qn;$.route=On;$.disconnect=hn;$.register=vn;$.dom=kn;$.supported=gn();Object.defineProperties($,{$:{get:()=>n},history:{value:{get state(){return n.history},api:b,push:fe,replace:se,has:gr,reverse:en}}});function gn(){return!!(Rt&&window.history.pushState&&window.requestAnimationFrame&&window.DOMParser&&window.Proxy)}function mn(e=null,...t){let r=typeof e=="string",s=r?t.length>0?[e].concat(t):[e]:e,o={};for(let i of n.mounted){let a=n.instances.get(i);if(s!==null)s.indexOf(a.scope.alias)>-1?o[a.scope.alias]=a:s.indexOf(a.scope.instanceOf)>-1&&(a.scope.instanceOf in o?g(`More than 1 instance defined: ${e}`):o[a.scope.instanceOf]=a);else if(a.scope.alias)o[a.scope.alias]=a;else if(a.scope.instanceOf in o)if(Array.isArray(o[a.scope.instanceOf]))o[a.scope.instanceOf].push(a);else{let l=o[a.scope.instanceOf];o[a.scope.instanceOf]=[l,a]}else o[a.scope.instanceOf]=a}return r?o[e]:o}function yn(e,t){let r=[];for(let s of r.values()){let{scope:o}=s;(o.instanceOf===e||o.alias===e)&&r.push(s)}return t?H(t,r):r[0]}function vn(...e){if(typeof e[0]=="string")e.length>2&&A(`Named component registration expects 2 parameters, recieved ${e.length}.`,e),B({[Bt[0]]:e[1]});else for(let t of e)if(Array.isArray(t))for(let r of t)typeof r[0]=="string"?B({[r[0]]:r[1]}):typeof r=="function"&&B({[Ye(r)]:r},!0);else typeof t=="function"?B({[Ye(t)]:t},!0):typeof t=="object"&&B(t);je()}function bn(){return["config","snaps","pages","observers","fragments","instances","mounted","registry","reference","memory"].reduceRight((e,t)=>Object.defineProperty(e,t,{get:t==="memory"?()=>n[t].size=Zr(n[t].bytes):()=>n[t],enumerable:!1,configurable:!1}),f())}async function $n(){n.page.type=9;let e=await N(n.page);return e?(X("Triggered reload, page was re-cached"),D(e)):(g("Reload failed, triggering refresh (cache will purge)"),location.assign(n.page.key))}async function wn(e){let t=C(e,2);if(t.location.origin!==de){A("Cross origin fetches are not allowed");return}let r=await He(t.key);if(r)return r}function kn(e,...t){let r=e[0];for(let l=0,c=t.length;l<c;l++)r+=t[l]+e[l+1];let s=r,o=document.createElement("div");o.innerHTML=s;let i=o.children.length;if(i===0)return null;if(i===1)return ie(o.children[0],"raw",s);let a=ie([],"raw",s);for(;o.firstChild;){let l=o.firstElementChild;l&&a.push(l),o.removeChild(o.firstChild)}}async function xn(e,t,r){let s=n.page,o=C(e);o.location.origin!==de&&A("Cross origin fetches are not allowed");let i=await He(o.key,{type:"document"});if(i||A(`Fetch failed for: ${o.key}`,i),await r.call(s,i),t==="replace"){s.title=i.title;let a=te(Object.assign(s,o),ae(i));return se(a),a}else return D(ct(o,ae(i)))}function An(e){let t=Os();if(!t)return;let r=pe();if(e=Array.isArray(e)?e:t.target,e.length===1&&e[0]==="body"){Oe(r.body,q()),te(t,ae(r));return}let s=e.join(","),o=q().querySelectorAll(s);V(r.body.querySelectorAll(s),(i,a)=>{Oe(i,o[a])}),te(t,ae(r))}async function qn(e){let t=C(e,1);if(W(t.key)){g(`Cache already exists for ${t.key}, prefetch skipped`);return}let r=await N(L(t));if(r)return r;A(`Prefetch failed for ${t.key}`)}async function Cn(e,t){let r=new FormData;for(let s in t.data)r.append(s,t.data[s]);return await He(e,{method:t.method,body:r})}async function En(e,t){let r=C(e,7);if(N(r),Array.isArray(t)){r.hydrate=[],r.preserve=[];for(let o of t)o.charCodeAt(0)===33?r.preserve.push(o.slice(1)):r.hydrate.push(o)}else r.hydrate=n.config.fragments;let s=await dt(r);if(s){let{key:o}=n.history;if(se(s),D(s),r.key!==o){n.index===o&&(n.index=r.key);for(let i in n.pages)n.pages[i].rev===o&&(n.pages[i].rev=r.key);le(o)}}return pe(s.key)}async function On(e,t){let r=C(e),s=typeof t=="object"?Object.assign(r,t):r;return W(r.key)?Tt(r.key,te(s)):Tt(r.key,L(s))}export{$ as default};
/*! Bundled license information:

spx/index.js:
  (**
  * SPX ~ Single Page XHR | https://spx.js.org
  *
  * @license CC BY-NC-ND 4.0
  * @version 0.0.5-rc.0
  * @copyright 2024 Nikolas Savvidis
  *)
*/
//# sourceMappingURL=spx.mjs.map